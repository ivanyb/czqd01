"use strict";var mongoose=require("mongoose"),usermodel=mongoose.model("user");exports.getloginpage=function(e,o){o.render("login.html",{title:"用户登录"},function(e,t){return e?(console.log(e),void o.end(e.toString())):void o.end(t)})},exports.postlogin=function(e,o){o.setHeader("Content-Type","text/html;charset=utf8");var t=e.body.uname,n=e.body.upwd,i={uname:t,upwd:n};usermodel.find(i,function(n,i){return 0==i.length?void o.end('<script>alert("用户名或者密码错误");window.location=window.location;</script>'):(e.session.username=t,void o.end('<script>alert("登录成功");window.location="/admin/list"</script>'))})},exports.getregisterpage=function(e,o){o.render("register.html",{title:"用户注册"},function(e,t){return e?(console.log(e),void o.end(e.toString())):void o.end(t)})},exports.postregister=function(e,o){var t=e.body.uname,n=e.body.upwd,i=e.body.uqq,r=e.body.uemail;console.log(t,n,i,r),usermodel.create({uname:t,upwd:n,uqq:i,uemail:r},function(e){o.setHeader("Content-Type","text/html;charset=utf8"),o.end('<script>alert("用户注册成功");window.location="/account/login"</script>')})},exports.logout=function(e,o){};